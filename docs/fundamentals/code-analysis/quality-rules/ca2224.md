---
title: "CA2224: Override equals on overloading operator equals"
description: "Learn about code analysis rule CA2224: Override equals on overloading operator equals"
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
  - "CA2224"
  - "OverrideEqualsOnOverloadingOperatorEquals"
  - "OverrideEqualsOnOverridingOperatorEquals"
helpviewer_keywords:
  - "OverrideEqualsOnOverloadingOperatorEquals"
  - "CA2224"
---
# CA2224: Override equals on overloading operator equals

|Item|Value|
|-|-|
|RuleId|CA2224|
|Category|Microsoft.Usage|
|Breaking change|Non-breaking|

## Cause

A public type implements the equality operator but doesn't override <xref:System.Object.Equals%2A?displayProperty=fullName>.

## Rule description

The equality operator is intended to be a syntactically convenient way to access the functionality of the <xref:System.Object.Equals%2A> method. If you implement the equality operator, its logic must be identical to that of <xref:System.Object.Equals%2A>.

The C# compiler issues a warning if your code violates this rule.

## How to fix violations

To fix a violation of this rule, you should either remove the implementation of the equality operator, or override <xref:System.Object.Equals%2A> and have the two methods return the same values. If the equality operator does not introduce inconsistent behavior, you can fix the violation by providing an implementation of <xref:System.Object.Equals%2A> that calls the <xref:System.Object.Equals%2A> method in the base class.

## When to suppress warnings

It is safe to suppress a warning from this rule if the equality operator returns the same value as the inherited implementation of <xref:System.Object.Equals%2A>. The examples in this article include a type that could safely suppress a warning from this rule.

## Examples of inconsistent equality definitions

The following example shows a type with inconsistent definitions of equality. `BadPoint` changes the meaning of equality by providing a custom implementation of the equality operator, but does not override <xref:System.Object.Equals%2A> so that it behaves identically.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="1":::

The following code tests the behavior of `BadPoint`.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="2":::

This example produces the following output:

```txt
a =  ([0] 1,1) and b = ([1] 2,2) are equal? No
a == b ? No
a1 and a are equal? Yes
a1 == a ? Yes
b and bcopy are equal ? No
b == bcopy ? Yes
```

The following example shows a type that technically violates this rule, but does not behave in an inconsistent manner.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="3":::

The following code tests the behavior of `GoodPoint`.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="4":::

This example produces the following output:

```txt
a =  (1,1) and b = (2,2) are equal? No
a == b ? No
a1 and a are equal? Yes
a1 == a ? Yes
b and bcopy are equal ? Yes
b == bcopy ? Yes
```

## Class example

The following example shows a class (reference type) that violates this rule.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="5":::

The following example fixes the violation by overriding <xref:System.Object.Equals%2A?displayProperty=fullName>.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="6":::

## Structure example

The following example shows a structure (value type) that violates this rule:

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="7":::

The following example fixes the violation by overriding <xref:System.ValueType.Equals%2A?displayProperty=fullName>.

:::code language="csharp" source="snippets/csharp/all-rules/ca2224.cs" id="8":::

## Related rules

- [CA1046: Do not overload operator equals on reference types](ca1046.md)
- [CA2225: Operator overloads have named alternates](ca2225.md)
- [CA2226: Operators should have symmetrical overloads](ca2226.md)
- [CA2218: Override GetHashCode on overriding Equals](../code-quality/ca2218.md)
- [CA2231: Overload operator equals on overriding ValueType.Equals](ca2231.md)
