---
title: Designing and Developing Multi Container and Microservice Based .NET Applications | Microsoft Docs 
description: .NET Microservices Architecture for Containerized .NET Applications | Designing and Developing Multi Container and Microservice Based .NET Applications
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/19/2017
---
-   [Vision](#vision)
-   [Designing a microservice-oriented application](#designing-a-microservice-oriented-application)
    -   [Application specifications](#application-specifications)
    -   [Development team context](#development-team-context)
    -   [Choosing an architecture](#choosing-an-architecture)
        -   [eShopOnContainers: A reference application for .NET Core and microservices deployed using containers](#eshoponcontainers-a-reference-application-for-.net-core-and-microservices-deployed-using-containers)
            -   [Data sovereignty per microservice](#data-sovereignty-per-microservice)
        -   [Additional resources](#additional-resources)
    -   [Benefits of a microservice-based solution](#benefits-of-a-microservice-based-solution)
    -   [Downsides of a microservice-based solution](#downsides-of-a-microservice-based-solution)
    -   [External versus internal architecture and design patterns](#external-versus-internal-architecture-and-design-patterns)
    -   [The new world: multiple architectural patterns and polyglot microservices](#the-new-world-multiple-architectural-patterns-and-polyglot-microservices)
-   [Creating a simple data-driven CRUD microservice](#creating-a-simple-data-driven-crud-microservice)
    -   [Designing a simple CRUD microservice](#designing-a-simple-crud-microservice)
    -   [Implementing a simple CRUD microservice with ASP.NET Core](#implementing-a-simple-crud-microservice-with-asp.net-core)
        -   [Implementing CRUD Web API services with Entity Framework Core](#implementing-crud-web-api-services-with-entity-framework-core)
            -   [Add Entity Framework Core to your dependencies](#add-entity-framework-core-to-your-dependencies)
            -   [The data model](#the-data-model)
                -   [Querying data from Web API controllers](#querying-data-from-web-api-controllers)
                -   [Saving data](#saving-data)
                -   [Dependency Injection in ASP.NET Core and Web API controllers](#dependency-injection-in-asp.net-core-and-web-api-controllers)
        -   [Additional resources](#additional-resources-1)
        -   [The DB connection string and environment variables used by Docker containers](#the-db-connection-string-and-environment-variables-used-by-docker-containers)
        -   [Implementing versioning in ASP.NET Web APIs](#implementing-versioning-in-asp.net-web-apis)
        -   [Additional resources](#additional-resources-2)
    -   [Generating Swagger description metadata from your ASP.NET Core Web API ](#generating-swagger-description-metadata-from-your-asp.net-core-web-api)
        -   [Why use Swagger?](#why-use-swagger)
        -   [How to automate API Swagger metadata generation with the Swashbuckle NuGet package](#how-to-automate-api-swagger-metadata-generation-with-the-swashbuckle-nuget-package)
        -   [Additional resources](#additional-resources-3)
-   [Defining your multi-container application with docker-compose.yml ](#defining-your-multi-container-application-with-docker-compose.yml)
    -   [A simple Web Service API container](#a-simple-web-service-api-container)
    -   [Using docker-compose files to target multiple environments](#using-docker-compose-files-to-target-multiple-environments)
        -   [Development environments](#development-environments)
        -   [Testing environments](#testing-environments)
        -   [Production deployments](#production-deployments)
    -   [Using multiple docker-compose files to handle several environments](#using-multiple-docker-compose-files-to-handle-several-environments)
        -   [Overriding the base docker-compose file](#overriding-the-base-docker-compose-file)
        -   [Targeting multiple environments](#targeting-multiple-environments)
        -   [How to deploy with a specific override file](#how-to-deploy-with-a-specific-override-file)
        -   [Using environment variables in docker-compose files](#using-environment-variables-in-docker-compose-files)
        -   [Additional resources](#additional-resources-4)
    -   [Building optimized ASP.NET Core Docker images](#building-optimized-asp.net-core-docker-images)
        -   [Additional resources](#additional-resources-5)
    -   [Building the application from a build (CI) container](#building-the-application-from-a-build-ci-container)
        -   [Creating the Docker images from the CLI](#creating-the-docker-images-from-the-cli)
        -   [Additional resources](#additional-resources-6)
-   [Using a database server running as a container](#using-a-database-server-running-as-a-container)
    -   [SQL Server running as a container with a microservice-related database](#sql-server-running-as-a-container-with-a-microservice-related-database)
        -   [Additional resources](#additional-resources-7)
    -   [Seeding with test data on Web application startup](#seeding-with-test-data-on-web-application-startup)
    -   [EF Core InMemory database versus SQL Server running as a container](#ef-core-inmemory-database-versus-sql-server-running-as-a-container)
    -   [Using a Redis cache service running in a container](#using-a-redis-cache-service-running-in-a-container)
-   [Implementing event-based communication between microservices (integration events)](#implementing-event-based-communication-between-microservices-integration-events)
    -   [Using message brokers and services buses for production systems](#using-message-brokers-and-services-buses-for-production-systems)
    -   [Integration events](#integration-events)
    -   [The event bus](#the-event-bus)
        -   [Observer pattern](#observer-pattern)
        -   [Publish-subscribe (Pub/Sub) pattern ](#publish-subscribe-pubsub-pattern)
        -   [The middleman or event bus ](#the-middleman-or-event-bus)
        -   [Defining an event bus interface](#defining-an-event-bus-interface)
        -   [Implementing an event bus with RabbitMQ for the development or test environment](#implementing-an-event-bus-with-rabbitmq-for-the-development-or-test-environment)
            -   [Implementing a simple publish method with RabbitMQ](#implementing-a-simple-publish-method-with-rabbitmq)
            -   [Implementing the subscription code with the RabbitMQ API](#implementing-the-subscription-code-with-the-rabbitmq-api)
        -   [Subscribing to events](#subscribing-to-events)
        -   [Publishing events through the event bus](#publishing-events-through-the-event-bus)
            -   [Designing atomicity and resiliency when publishing to the event bus](#designing-atomicity-and-resiliency-when-publishing-to-the-event-bus)
            -   [Implementing atomicity when publishing integration events through the event bus](#implementing-atomicity-when-publishing-integration-events-through-the-event-bus)
            -   [Receiving messages from subscriptions: event handlers in receiver microservices](#receiving-messages-from-subscriptions-event-handlers-in-receiver-microservices)
        -   [Idempotency in update message events](#idempotency-in-update-message-events)
            -   [Additional resources](#additional-resources-8)
        -   [Deduplicating integration event messages](#deduplicating-integration-event-messages)
            -   [Deduplicating message events at the EventHandler level](#deduplicating-message-events-at-the-eventhandler-level)
            -   [Deduplicating messages when using RabbitMQ](#deduplicating-messages-when-using-rabbitmq)
            -   [Additional resources](#additional-resources-9)
-   [Testing ASP.NET Core services and web apps](#testing-asp.net-core-services-and-web-apps)
    -   [Implementing unit tests for ASP.NET Core Web APIs](#implementing-unit-tests-for-asp.net-core-web-apis)
    -   [Implementing integration and functional tests for each microservice](#implementing-integration-and-functional-tests-for-each-microservice)
        -   [Additional resources](#additional-resources-10)
    -   [Implementing service tests on a multi-container application ](#implementing-service-tests-on-a-multi-container-application)



>[!div class="step-by-step"]
[Previous] (../migrating-legacy-monolithic-net-framework-applications-to-windows-containers/development-and-production-environments.md)
[Next] (vision.md)
